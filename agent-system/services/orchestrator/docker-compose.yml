services:
  orchestrator:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: agent-orchestrator
    ports:
      - "8001:8000"
    environment:
      - REDIS_HOST=agent-redis  # Connects to external Redis via Docker DNS
      - REDIS_PORT=6379
    volumes:
      - ./app.py:/app/app.py  # Live reload
    command: ["uv", "run", "uvicorn", "app:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]
    networks:
      - agent-system-net
    restart: unless-stopped

networks:
  agent-system-net:
    external: true
